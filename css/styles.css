/* Custom styles that go beyond Tailwind's capabilities */

/* Smooth scrolling for anchor links */
html {
  scroll-behavior: smooth;
}

/* Remove default focus styles */
:focus {
  outline: none;
}

/* Nav item styling with padding to minimize layout shifts */
nav a, .dropdown-toggle {
  position: relative;
  display: inline-block;
  padding: 0.15em 0; /* Add slight padding to minimize layout shift */
  transition: color 0.3s ease, font-size 0.3s ease, font-weight 0.3s ease;
}

/* Nav item underline animation - for main nav items */
nav a::after, .dropdown-toggle::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 50%;
  right: 50%;
  height: 2px;
  background-color: #15803d; /* green-700 */
  transition: left 0.3s ease, right 0.3s ease;
}

nav a:hover::after, .dropdown-toggle:hover::after {
  left: 0;
  right: 0;
}

/* Active state for current page - without layout shifts */
nav a.active, .dropdown-toggle.active {
  color: #15803d; /* green-700 */
  font-weight: 600; /* Make it bold */
  font-size: 1.05em; /* Make it slightly larger */
  /* No permanent underline for active state */
}

/* Ensure underline still works on hover for active items */
nav a.active::after, .dropdown-toggle.active::after {
  background-color: #15803d; /* Keep the color consistent */
}

/* Navbar container - add extra space to prevent jumping */
nav.main-nav {
  height: 3rem; /* Fixed height to prevent layout shifts */
  display: flex;
  align-items: center;
}

/* Entfernen aller vorherigen Dropdown-Stile, die Konflikte verursachen könnten */
.dropdown-menu,
.dropdown,
.dropdown-toggle,
.group:hover .dropdown-menu,
.dropdown.active .dropdown-menu,
.dropdown:hover .dropdown-menu,
.group:not(:hover) .dropdown-menu:not(:hover),
.dropdown-menu a,
.group:hover .dropdown-menu a:nth-child(n),
.active-dropdown .dropdown-menu a:nth-child(n),
.group:not(:hover) .dropdown-menu a:nth-child(n) {
  all: unset;
}

/* Einfaches, robustes Dropdown */
.simple-dropdown {
  position: relative;
  display: inline-block;
}

.simple-dropdown-content {
  /* Keep basic positioning */
  position: absolute;
  top: 100%;
  left: auto;
  z-index: 10000;
  min-width: 160px;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 8px 0;
  
  /* Animation properties */
  opacity: 0;
  transform: translateY(-10px) scaleY(0.8);
  transform-origin: top center;
  transition: opacity 0.3s ease-out, 
              transform 0.3s cubic-bezier(0.17, 0.84, 0.44, 1),
              visibility 0.3s ease-out;
  visibility: hidden;
  display: block; /* Always display but control visibility */
}

/* Dropdown show animation */
.simple-dropdown:hover .simple-dropdown-content {
  opacity: 1;
  transform: translateY(0) scaleY(1);
  visibility: visible;
}

/* Dropdown items sequential animation */
.simple-dropdown-content a {
  display: block;
  padding: 10px 16px;
  color: #333;
  opacity: 0;
  transform: translateX(-10px);
  transition: opacity 0.2s ease-out, 
              transform 0.2s ease-out,
              background-color 0.2s ease;
}

/* Sequential appearance animation for items */
.simple-dropdown:hover .simple-dropdown-content a:nth-child(1) {
  transition-delay: 0.05s;
  opacity: 1;
  transform: translateX(0);
}

.simple-dropdown:hover .simple-dropdown-content a:nth-child(2) {
  transition-delay: 0.1s;
  opacity: 1;
  transform: translateX(0);
}

.simple-dropdown:hover .simple-dropdown-content a:nth-child(3) {
  transition-delay: 0.15s;
  opacity: 1;
  transform: translateX(0);
}

/* Arrow rotation animation */
.simple-dropdown-button svg {
  transition: transform 0.3s ease;
}

.simple-dropdown:hover .simple-dropdown-button svg {
  transform: rotate(180deg);
}

/* Item hover effect - underline */
.simple-dropdown-content a {
  position: relative;
}

.simple-dropdown-content a::after {
  content: '';
  position: absolute;
  bottom: 5px;
  left: 16px;
  right: 16px;
  height: 2px;
  background-color: #15803d; /* green-700 */
  transform: scaleX(0);
  transform-origin: center;
  transition: transform 0.3s ease;
}

.simple-dropdown-content a:hover {
  background-color: transparent; /* Override previous background color */
  color: #15803d; /* green-700 */
}

.simple-dropdown-content a:hover::after {
  transform: scaleX(1);
}

/* Reset pointer events for all navbar elements to ensure they're clickable */
.navbar-container *, #mobile-menu * {
  pointer-events: auto;
}

/* Remove focus outlines */
input:focus, textarea:focus, button:focus {
  outline: none;
}

/* Restore focus ring for accessibility, but make it subtler */
input:focus, textarea:focus {
  box-shadow: 0 0 0 2px rgba(21, 128, 61, 0.2);
}

/* Dropdown menu styling for maintaining rounded corners */
.dropdown-menu {
  overflow: hidden; /* Ensures content respects the container's border radius */
}

/* First and last items in dropdown need special treatment */
.dropdown-menu a:first-child {
  border-top-left-radius: 0.375rem;
  border-top-right-radius: 0.375rem;
}

.dropdown-menu a:last-child {
  border-bottom-left-radius: 0.375rem;
  border-bottom-right-radius: 0.375rem;
}

/* Create a connection buffer between nav item and dropdown menu */
.dropdown {
  position: relative;
}

/* Invisible buffer area to prevent dropdown from closing when moving cursor */
.dropdown::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  height: 15px; /* Buffer height */
  z-index: 49; /* Just below dropdown menu z-index */
}

/* Adjust dropdown position to connect with buffer */
.dropdown-menu {
  margin-top: 0 !important; /* Remove any margin between buffer and dropdown */
  top: calc(100% + 15px); /* Position directly after buffer */
}

/* Better hover tracking for the dropdown group */
.group:hover .dropdown-menu,
.dropdown-menu:hover,
.group:hover + .dropdown-menu {
  transform: scaleY(1);
  opacity: 1;
  visibility: visible;
  transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1);
}

/* More defensive timing for disappearance to prevent flickering */
.group:not(:hover) .dropdown-menu:not(:hover) {
  transition: max-height 0.7s ease-in; /* Reduced from 0.9s to 0.7s for slightly faster closing */
  transition-delay: 0.1s; /* Keep the same delay before closing starts */
}

/* Mobile menu animations */
#mobile-menu {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.6s ease-out;
}

#mobile-menu.open {
  max-height: 500px; /* Adjust based on expected content height */
}

/* Mobile dropdown animations */
.mobile-dropdown-content {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height 0.5s ease-out, opacity 0.3s;
}

.mobile-dropdown-content.open {
  max-height: 300px;
  opacity: 1;
}

/* Animation for dropdown arrow - even faster opening animation */
.dropdown-toggle svg {
  transition: transform 0.3s ease-out; /* Reduced from 0.5s to 0.3s for even faster opening */
  transform-origin: center;
}

/* Rotate arrow on hover and when dropdown is active */
.group:hover .dropdown-toggle svg,
.active-dropdown .dropdown-toggle svg {
  transform: rotate(-180deg);
}

/* When dropdown is closing, animate arrow back with matching delay and duration */
.group:not(:hover) .dropdown-toggle svg {
  transition: transform 0.7s ease-in; /* Keep closing speed the same */
  transition-delay: 0.1s;
}

/* Improved button styling with animations */
.btn {
  background-color: #15803d; /* green-700 */
  color: white;
  padding: 0.6rem 1.4rem;
  border-radius: 0.375rem;
  font-weight: 500;
  letter-spacing: 0.01em;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  top: 0;
}

/* Hover effect - lift up slightly */
.btn:hover {
  background-color: #166534; /* green-800 - slightly darker */
  transform: translateY(-2px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* Press effect - push down */
.btn:active {
  transform: translateY(2px);
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

/* Add subtle shine effect on hover */
.btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to right,
    transparent 0%,
    rgba(255, 255, 255, 0.2) 50%,
    transparent 100%
  );
  transition: left 0.7s ease;
}

.btn:hover::after {
  left: 100%;
}

/* Responsive navbar improvements */
.navbar-container {
  width: 100%;
  transition: padding 0.3s ease;
}

/* Round the navbar at the left and right sides */
.navbar-container {
  border-radius: 1rem;
  margin: 0 1rem; /* Add some margin on sides to make the rounded edges visible */
  width: calc(100% - 2rem); /* Adjust width to account for margin */
  background-color: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Make header background transparent to show rounded container */
header {
  background-color: transparent !important;
}

/* Make sure mobile menu also has rounded edges */
#mobile-menu {
  border-radius: 0 0 1rem 1rem;
  margin: 0 1rem;
  width: calc(100% - 2rem);
}

/* Floating + sticky navbar with rounded sides */
header {
  position: sticky;
  top: 1rem; /* Space from top of page */
  left: 0;
  right: 0;
  z-index: 50;
  background-color: transparent;
  padding: 0 1rem;
}

.navbar-container {
  background-color: white;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  padding: 0.75rem 1.5rem;
}

/* Mobile menu adjustments for floating navbar */
#mobile-menu {
  position: absolute;
  top: 100%;
  left: 1rem;
  right: 1rem;
  border-radius: 0 0 1rem 1rem;
  background-color: white;
  margin-top: 0.25rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Fix the hero section to be full-width and start from top */
#hero {
  margin-top: 0;
  padding-top: 9rem; /* Increased from 7rem */
  padding-bottom: 9rem; /* Increased from 6rem */
  min-height: 90vh; /* Increased from 80vh for more vertical space */
  background-color: #15803d; /* green-700 */
  position: relative;
  display: flex;
  align-items: center; /* Center content vertically */
}

/* Adjust hero content vertical positioning */
.hero-content {
  position: relative;
  z-index: 2; /* Ensure content is above background but below navbar */
  padding-top: 4rem; /* Increased from 3rem */
  width: 100%;
}

/* Ensure all interactive elements are clickable */
.btn, nav a, .dropdown-toggle, #mobile-menu-button {
  position: relative;
  z-index: 1;
  pointer-events: auto;
}

/* Reset body margin and improve overall layout */
body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Navbar basic styling */
header {
  position: fixed;
  top: 1rem;
  left: 0;
  right: 0;
  z-index: 9999;
  background-color: transparent;
  padding: 0 1rem;
}

.navbar-container {
  background-color: white;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  padding: 0.75rem 1.5rem;
  overflow: visible;
}

/* Dropdown styling - truly seamless connection with navbar */
.nav-dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  position: absolute;
  left: 50%;
  transform: translateX(-50%); /* Center the dropdown under the button */
  padding: 0;
  background-color: white; /* Same as navbar */
  width: max-content; /* Only as wide as content requires */
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
  border-radius: 0 0 0.5rem 0.5rem; /* Only round bottom corners */
  border-top: none;
  
  /* Remove top shadow to prevent visible separation */
  box-shadow: 0 8px 16px -6px rgba(0, 0, 0, 0.1);
  
  /* Initial state for animation */
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.8s cubic-bezier(0.17, 0.84, 0.44, 1); /* Slower animation */
  z-index: 10000;
  margin-top: 0; /* No margin to ensure seamless connection */
}

/* Prevent top nav underline from showing when dropdown is active */
.nav-dropdown:hover .dropdown-button::after {
  opacity: 0;
}

/* Dropdown menu with faster appearance */
.dropdown-menu {
  display: none;
  position: absolute;
  left: 50%;
  top: 100%;
  transform: translateX(-50%);
  background-color: white;
  min-width: 160px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  border-radius: 0.5rem;
  padding: 0.5rem 0;
  z-index: 1000;
  margin-top: 0.5rem;
  
  /* Add immediate animation for faster appearance */
  animation: fadeIn 0.15s ease-out forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Dropdown items styling and animation - slower */
.dropdown-content a {
  padding: 12px 16px;
  display: block;
  color: #333;
  opacity: 0;
  transform: translateY(-20px);
  transition: opacity 0.5s ease, transform 0.5s ease; /* Slower animations */
  border-bottom: none; /* Entferne jeden möglichen unteren Rand */
}

/* Sequential item appearance - slower */
.nav-dropdown:hover .dropdown-content a:nth-child(1) {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.05s; /* Reduziert von 0.2s */
}

.nav-dropdown:hover .dropdown-content a:nth-child(2) {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.1s; /* Reduziert von 0.3s */
}

.nav-dropdown:hover .dropdown-content a:nth-child(3) {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.15s; /* Reduziert von 0.4s */
}

/* Auch die Verschwinde-Animationen beschleunigen */
.nav-dropdown:not(:hover) .dropdown-content a:nth-child(3) {
  transition-delay: 0s;
}

.nav-dropdown:not(:hover) .dropdown-content a:nth-child(2) {
  transition-delay: 0.05s; /* Reduziert von 0.1s */
}

.nav-dropdown:not(:hover) .dropdown-content a:nth-child(1) {
  transition-delay: 0.1s; /* Reduziert von 0.2s */
}

/* Word-specific underline effect - ensure no conflicts with top nav */
.dropdown-content a span {
  position: relative;
  display: inline-block;
}

.dropdown-content a span::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background-color: #15803d; /* green-700 */
  transform: scaleX(0);
  transform-origin: center;
  transition: transform 0.5s ease; /* Slower animation */
}

/* Arrow animation - slower */
.dropdown-button svg {
  transition: transform 0.5s ease; /* Slower animation */
}

/* Top nav items underline animation */
nav a, .dropdown-button {
  position: relative;
}

nav a::after, .dropdown-button::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 50%;
  right: 50%;
  height: 2px;
  background-color: #15803d; /* green-700 */
  transition: left 0.3s ease, right 0.3s ease;
}

nav a:hover::after, .dropdown-button:hover::after {
  left: 0;
  right: 0;
}

/* Clear hover background effect */
.dropdown-content a:hover {
  background-color: transparent;
}

/* Entfernung des zusätzlichen Balkens am Box-Rand */
.dropdown-content {
  border-bottom: none !important;
}

/* Stelle sicher, dass Dropdown-Menüpunkte keine zusätzlichen Balken haben */
.dropdown-content a {
  border-bottom: none !important;
}

/* Spezifischer Selektor, um nur den Wort-Unterstrich zu behalten */
.dropdown-content a span::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background-color: #15803d; /* green-700 */
  transform: scaleX(0);
  transform-origin: center;
  transition: transform 0.5s ease;
}

/* Keine ::after Elemente für .dropdown-content a selbst */
.dropdown-content > a::after {
  display: none !important;
}

/* Stelle sicher, dass Dropdown weiterhin sichtbar ist */
.nav-dropdown:hover .dropdown-content {
  max-height: 300px; /* Ensure this value is large enough */
  visibility: visible !important;
  opacity: 1 !important;
}

/* Wiederherstellung der Pfeilanimation */
.dropdown-button svg {
  transition: transform 0.5s ease;
}

.nav-dropdown:hover .dropdown-button svg {
  transform: rotate(180deg);
}

/* Wiederherstellung des Hover-Effekts für Dropdown-Items */
.dropdown-content a span {
  position: relative;
  display: inline-block;
}

.dropdown-content a span::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background-color: #15803d; /* green-700 */
  transform: scaleX(0);
  transform-origin: center;
  transition: transform 0.5s ease;
}

.dropdown-content a:hover span::after {
  transform: scaleX(1);
}

.dropdown-content a:hover {
  color: #15803d; /* green-700 */
}

/* Stelle sicher, dass keine anderen ::after-Elemente die Balken erstellen */
.dropdown-content a::after {
  display: none !important;
}

/* Stelle sicher, dass das Dropdown weiterhin funktioniert */
.nav-dropdown:hover .dropdown-content {
  max-height: 300px; /* Ensure this value is large genug */
  visibility: visible !important;
  opacity: 1 !important;
}
